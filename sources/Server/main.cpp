///////////////////////////////////////////////////////////////////////////
// Precompilled headers
///////////////////////////////////////////////////////////////////////////
#include <pch.hpp>

///////////////////////////////////////////////////////////////////////////
// Headers
///////////////////////////////////////////////////////////////////////////
#include <Example/Server.hpp>

///////////////////////////////////////////////////////////////////////////
auto main(
    int argc
    , char** argv
) -> int
{
    XRN_FATAL_SASSERT(argc == 2, "Usage: server <host>");

    ::example::Server server{ static_cast<::std::uint16_t>(::std::atoi(argv[1])) };

    ::std::string str;
    while (server.isRunning()) {
        ::std::getline(::std::cin, str);
        if (str == "/q") {
            server.stop();
        }
    }

    return EXIT_SUCCESS;
}
